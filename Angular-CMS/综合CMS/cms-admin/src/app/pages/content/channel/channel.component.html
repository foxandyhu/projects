<nb-card>
  <nb-card-header>
    栏目管理
  </nb-card-header>
  <nb-list>
    <nb-list-item>
      <form class="form-inline">
        <div class="form-group">
          <button class="btn btn-success" (click)="showAddChannel()">
            <span class="ion-plus-round"></span> 新增
          </button>&nbsp;&nbsp;&nbsp;
          <button class="btn btn-outline-primary" [disabled]="!(selectItems.length>0)" (click)="delMulti()">
            <i class="ion-trash-b"></i> 批量删除
          </button>
        </div>
      </form>
      <table class="table table-hover margin-top-2p" [nbTreeGrid]="dataSource" [nbSort]="dataSource">
        <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef="allColumns"></tr>
        <tr nbTreeGridRow *nbTreeGridRowDef="let row; columns: allColumns"></tr>

        <ng-container [nbTreeGridColumnDef]="customColumn">
          <th nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>
            {{headerNames[customColumn]}}
          </th>
          <td nbTreeGridCell *nbTreeGridCellDef="let row">
            <ngx-fs-icon [length]="row.children?.length>0" [expanded]="row.expanded"></ngx-fs-icon>
            {{row.data[customColumn]}}
          </td>
        </ng-container>

        <ng-container *ngFor="let column of defaultColumns; let index = index"
                      [nbTreeGridColumnDef]="column"
                      [showOn]="getShowOn(index)">
          <th nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>
            {{headerNames[column]}}
          </th>
          <td nbTreeGridCell *nbTreeGridCellDef="let row">
            <div *ngIf="column=='op'">
              <button class="btn btn-info btn-smaller" (click)="showEditChannel(row.data['id'])">
                <i class="ion-edit"></i> 编辑
              </button>&nbsp;&nbsp;
              <button class="btn btn-danger btn-smaller" (click)="del(row.data['id'])">
                <i class="ion-trash-a"></i> 删除
              </button>
            </div>
            <div *ngIf="column=='seq'">
              <i class="sort-op ion-arrow-down-a pointer" (click)="sort(row.data['id'],false)"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <i class="sort-op ion-arrow-up-a pointer" (click)="sort(row.data['id'],true)"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            </div>
            <div *ngIf="column!='op' && column!='seq'">
              {{row.data[column]}}
            </div>
          </td>
        </ng-container>
      </table>
    </nb-list-item>
  </nb-list>
  <nb-card-footer class="text-right">
    <ngb-pagination ngClass="ng2-smart-pagination" maxSize="10" [collectionSize]="pager?.totalCount"
                    [pageSize]="pager?.pageSize" (pageChange)="changePager($event)"></ngb-pagination>
  </nb-card-footer>
</nb-card>
